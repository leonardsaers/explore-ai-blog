# Asking chat gpt-3 how to write tsp in prolog

The Traveling salesman problem (TSP) is a good challenge for a code writing AI. The TSP is one of the most classic problems and therefore also well documented. Prolog as a language may not be used much, but it's still well documented since its commonly used in higher educations.

Can chatGPT-3 produce code that solves TSP in prolog?

The following code was produce by chatGPT-3:

```prolog

% Define the distance between two cities as the Euclidean distance between their coordinates
distance((X1, Y1), (X2, Y2), D) :-
    D is sqrt((X1 - X2)**2 + (Y1 - Y2)**2).

% Define a predicate that calculates the total distance of a route
route_distance([], _, 0).
route_distance([City1, City2|Tail], Cities, D) :-
    distance(City1, City2, D1),
    route_distance([City2|Tail], Cities, D2),
    D is D1 + D2.

% Define the main TSP predicate
tsp(Cities, Route) :-
    % Find all possible routes through the cities
    permutation(Cities, Route),
    % Calculate the total distance of the route
    route_distance(Route, Cities, D),
    % Return only routes with a total distance less than a certain threshold
    D < 100.

```

Does the suggested code work?

Not really, but it's not that far off.

The three suggested methods (distance, route distance and tps) would work for a TPS program.

```prolog

% Define the distance between two cities as the Euclidean distance between their coordinates
distance((X1, Y1), (X2, Y2), D) :-
    D is sqrt((X1 - X2)**2 + (Y1 - Y2)**2).

```

The distance function works perfectly and could be used in a TPS program.

```prolog

% Define a predicate that calculates the total distance of a route
route_distance([], _, 0).
route_distance([City1, City2|Tail], Cities, D) :-
    distance(City1, City2, D1),
    route_distance([City2|Tail], Cities, D2),
    D is D1 + D2.

```

The route_distance function does not work, the comment suggested by chatGPT-3 for the function should calculate the distance for one specific route. The input to the functions takes a list of cities which represent the route to calculate and a parameter D which is used to for the distance of the route. Then there is a parameter called Cities that is not used at all.

Removing the Cities parameter and changing the stop condition to match a list with exactly one item instead of an empty list will solve the issues that existed in the suggested solution.

```prolog

% Define a predicate that calculates the total distance of a route
% route_distance([(0,0),(1,1),(3,3)],D).
route_distance([_], 0).
route_distance([City1, City2|Tail], D) :-
    distance(City1, City2, D1),
    route_distance([City2|Tail], D2),
    D is D1 + D2.

```

There are also some changes needed do be done on the tsp function.

```prolog

% Define the main TSP predicate
tsp(Cities, Route) :-
    % Find all possible routes through the cities
    permutation(Cities, Route),
    % Calculate the total distance of the route
    route_distance(Route, Cities, D),
    % Return only routes with a total distance less than a certain threshold
    D < 100.

```

The D parameter needs to be added to the function call in order to get the distance.

And the constraint that suggest that D is smaller than 100 should be removed for a generic solution.

```prolog

% Define the main TSP predicate
tsp(Cities,Route,D) :-
    % Find all possible routes through the cities
    permutation(Cities, Route),
    % Calculate the total distance of the route
    route_distance(Route, D).

```

Here is the suggested code by chatGPT-3 with the described changes.

```prolog

% Define the distance between two cities as the Euclidean distance between their coordinates
% distance((0,0),(3,3), D).
distance((X1, Y1), (X2, Y2), D) :-
    D is sqrt((X1 - X2)**2 + (Y1 - Y2)**2).

% Define a predicate that calculates the total distance of a route
% route_distance([(0,0),(1,1),(3,3)],D).
route_distance([_], 0).
route_distance([City1, City2|Tail], D) :-
    distance(City1, City2, D1),
    route_distance([City2|Tail], D2),
    D is D1 + D2.

% Define the main TSP predicate
tsp(Cities,Route,D) :-
    % Find all possible routes through the cities
    permutation(Cities, Route),
    % Calculate the total distance of the route
    route_distance(Route, D).

```

It's all very impressive that an almost working sample of code for prolog can be generated by chatGPT-3. However, the suggested code does not return the shortest path between nodes, instead it return all possible paths and the distance of each patch. The solution needs to be altered a bit more in order to only return the shortest possible paths.

Here is the output of an execution of the code.

```prolog

?- tsp([(0,0),(1,1),(3,3)],R,D).
R = [(0, 0), (1, 1), (3, 3)],
D = 4.242640687119286 ;
R = [(0, 0), (3, 3), (1, 1)],
D = 7.0710678118654755 ;
R = [(1, 1), (0, 0), (3, 3)],
D = 5.65685424949238 ;
R = [(1, 1), (3, 3), (0, 0)],
D = 7.0710678118654755 ;
R = [(3, 3), (0, 0), (1, 1)],
D = 5.65685424949238 ;
R = [(3, 3), (1, 1), (0, 0)],
D = 4.242640687119286 ;
false.


```



